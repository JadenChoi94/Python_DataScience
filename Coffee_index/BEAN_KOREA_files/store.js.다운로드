(function(ssq){
	var	struc={}, config={}, listener={};
	var  _mainImgs , mainListSub;
	ssq(document).ready(function(){ struc.init() });
	function trace(a){ var b=""; for(var i=0;i<arguments.length;i++){if(i>0)b+=", ";b+=arguments[i];} try{console.log(b);}catch(e){}}
	struc = {
		init : function() {
			struc.regist(); 
			struc.pageMethod();
			listener.start();
		},
		regist : function() {

		},
		pageMethod : function () {
			searchTab();
			storeTab();
			conditionBox();
			storeSlide();
		}
	};
	listener = {
		start : function(){
			ssq(window).bind("resize", listener.resizePage); listener.resizePage();
			ssq("a.scroll_buttom").on("click", function(e){ e.preventDefault(); goScroll(ssq(this).attr("href")); });
			ssq("a[href=#]").on("click",function(e){
				e.preventDefault();
			})
		},
		resizePage : function(e) {
		
		}
	};

	function searchTab(){
		jQuery('.search_tab > h3:not(.on)').next().hide();
		jQuery('.search_tab > h3 > a').click(function(e){
			jQuery('.search_tab > h3').removeClass('on');
			jQuery(this).parent().addClass('on');
			jQuery('.search_tab > .cont').hide();
			jQuery(this).parent().next().show();
		});
	}
	function conditionBox(){
		jQuery('.btn_condition').click(function(e){
			if(jQuery(this).hasClass('on')){
				jQuery(this).removeClass('on');
				jQuery('.condition_box').hide();	
			}else{
				jQuery(this).addClass('on');
				jQuery('.condition_box').show();		
			}
		});
		jQuery('.condition_box .btn_close').click(function(e){
			jQuery('.btn_condition').removeClass('on');
			jQuery('.condition_box').hide();	
		});
	}
	function storeTab(){
		jQuery('.store_tab > h3:not(.on)').next().hide();
		jQuery('.store_tab > h3 > a').click(function(e){
			jQuery('.store_tab > h3').removeClass('on');
			jQuery(this).parent().addClass('on');
			jQuery('.store_tab > .cont').hide();
			jQuery(this).parent().next().show();
		});
	}
	function storeSlide() {
		jQuery('.store_slide > div')
			.on('init', function(e,slick){
				if (ssq(".slick-dots").size()>0) ssq("#btnControls1").css("display","inline");
				else ssq("#btnControls1").css("display","none");
		})
			.on('breakpoint', function(e,slick,breakpoint){
				if (ssq(".slick-dots").size()>0) ssq("#btnControls1").css("display","inline");
				else ssq("#btnControl1").css("display","none");
		});
		jQuery('.store_slide > div').slick({
			infinite: true,
			dots: true,
			arrows: false,
			autoplay: true,
			autoplaySpeed: 4000,
			pauseOnHover : false,
			slidesToShow: 3,
			slidesToScroll: 3,
			responsive: [
				{
				  breakpoint: 1200,
				  settings: {
					slidesToShow: 2,
					slidesToScroll: 2
				  }
				},
				{
				  breakpoint: 768,
				  settings: {
					slidesToShow: 1,
					slidesToScroll: 1
				  }
				}
			]
		});
		jQuery('#btnControls1').on('click', function(e){
			var controlsBtn = jQuery(this);
			if (controlsBtn.hasClass('paused')){
				jQuery('.store_slide > div').slick('slickPlay');
				controlsBtn.removeClass('paused');
				controlsBtn.addClass('play');
			} else {
				jQuery('.store_slide > div').slick('slickPause');
				controlsBtn.removeClass('play');
				controlsBtn.addClass('paused');
			}
		});
	}

	
})(jQuery);

var storePopup;
function storePop() {
	var formStr = "";
		formStr +='<div class="store_popup">';
		formStr +='	<div class="popup_inner">';
		formStr +='		<div class="store_pop_slide">';
		formStr +='			<div class="slide_box">';
		formStr +='				<div><img src="/images/_temp/img_store_pop_slide.jpg" alt=""></div>';
		formStr +='				<div><img src="/images/_temp/img_store_pop_slide.jpg" alt=""></div>';
		formStr +='				<div><img src="/images/_temp/img_store_pop_slide.jpg" alt=""></div>';
		formStr +='			</div>';
		formStr +='			<button id="btnControls2" class="btn_controls play" >pause/play</button>';
		formStr +='		</div>';
		formStr +='		<div class="store_txt">';
		formStr +='			<h2>커피빈 슈퍼스타점</h2>';
		formStr +='			<p class="tag">';
		formStr +='				<span>디카페인</span><span>두유</span><span>주차가능</span><span>와이파이</span><span>흡연가능</span><span>머신판매</span>';
		formStr +='			</p>';
		formStr +='			<p class="info">';
		formStr +='				영업시간 : AM 10:00 ~ PM 10:00<br/>';
		formStr +='				5,000원이상 1시간 무료주차, 15,000원이상 2시간 무료주차( 건물 지하주차창이용)<br/>';
		formStr +='				서울특별시 강남구 압구정로42길 58  <span class="lot">(서울특별시 강남구 신사동 633-4)</span><br/>';
		formStr +='				02-3446-7058 / 매장 이메일 : cbk001@coffeebeankorea.com';
		formStr +='			</p>';
		formStr +='		</div>';
		formStr +='		<div class="share_box">';
		formStr +='			<a href="#"><img alt="" src="../../images/_temp/ico_twitter.png"></a>';
		formStr +='			<a href="#"><img alt="" src="../../images/_temp/ico_facebook.png"></a>';
		formStr +='			<a href="#"><img alt="" src="../../images/_temp/ico_kakaostory.png"></a>';
		formStr +='		</div>';
		formStr +='		<button class="close" id="closeBtn1" style="cursor: pointer;"><img alt="닫기" src="/images/btn/btn_close4.png"></button>';
		formStr +='	</div>';
		formStr +='</div>';


		storePopup = new CoverLayer(formStr, {
			bg_color : "white", 		// 백그라운드 색상 기본값:"#000"
			bg_opacity : 0.75, 		// 백그라운드 투명도. 기본값:0.75
			close_btn_id : "closeBtn1", 	// 레이어 닫기 버튼 DOM id, 기본값:"closeBtn"
			z_index : 99999, 			// 레이어의 z-index 값 기본값:99990
			cast_speed : 500,		// 레이어 생성 트위닝 속도
			close_click : false,		// 어느곳이나 클릭시 닫힘 여부, 활성화:true, 비활성화:false(기본값)
			scroll_fix : false
		});
		jQuery('.store_pop_slide > div')
			.on('init', function(e,slick){
				if (ssq(".slick-dots").size()>0) ssq("#btnControls2").css("display","inline");
				else ssq("#btnControls2").css("display","none");
		})
			.on('breakpoint', function(e,slick,breakpoint){
				if (ssq(".slick-dots").size()>0) ssq("#btnControls2").css("display","inline");
				else ssq("#btnControls2").css("display","none");
		});
		jQuery('.store_pop_slide > div').slick({
			infinite: true,
			dots: true,
			arrows: false,
			fade: true,
			autoplay: true,
			autoplaySpeed: 4000,
			pauseOnHover : false,
			slidesToShow: 1,
			slidesToScroll: 1
		});
		jQuery('#btnControls2').on('click', function(){
			var controlsBtn = jQuery(this);
			if (controlsBtn.hasClass('paused')){
				jQuery('.store_pop_slide > div').slick('slickPlay');
				controlsBtn.removeClass('paused');
				controlsBtn.addClass('play');
			} else {
				jQuery('.store_pop_slide > div').slick('slickPause');
				controlsBtn.removeClass('play');
				controlsBtn.addClass('paused');
			}
		});
}

//상세보기
	var storePopup2;
	function storePop2(no) {
		var formStr = "";

		jQuery.ajax({
			type: "GET",
			datatype: "json",
			data : { "storeNo" : no },
			url: "store_data2.asp",
			success: function (data) {

				positions = eval(data);
				var imageCount = 0;

				formStr +='<div class="store_popup">';
				formStr +='	<div class="popup_inner">';
				formStr +='		<div class="store_pop_slide">';
				formStr +='			<div class="slide_box">';
				if ( positions[0].StoreImage1 != ""  )	{
					formStr +=	'<div><img src="/data/store/' + positions[0].StoreImage1 + '" alt=""></div>';
					imageCount++;
				}
				if ( positions[0].StoreImage3 != ""  )	{
					formStr +=	'<div><img src="/data/store/' + positions[0].StoreImage3 + '" alt=""></div>';
					imageCount++;
				}
				if ( positions[0].StoreImage4 != ""  )	{
					formStr +=	'<div><img src="/data/store/' + positions[0].StoreImage4 + '" alt=""></div>';
					imageCount++;
				}
				if ( positions[0].StoreImage5 != ""  )	{
					formStr +=	'<div><img src="/data/store/' + positions[0].StoreImage5 + '" alt=""></div>';
					imageCount++;
				}
				if ( positions[0].StoreImage6 != ""  )	{
					formStr +=	'<div><img src="/data/store/' + positions[0].StoreImage6 + '" alt=""></div>';
					imageCount++;
				}
				if ( imageCount < 1  )	{
					formStr +=	'<div><img src="/images/_temp/store_view_no_img.jpg" alt=""></div>';
				}

				formStr +='			</div>';
				if ( imageCount > 0  )	{
					formStr +='			<button id="btnControls2" class="btn_controls play" >pause/play</button>';
				}
			
				formStr +='		</div>';
				formStr +='		<div class="store_txt">';
				formStr +='			<h2>' + positions[0].StoreName + '</h2>';
				formStr +='			<p class="tag">';

				formStr +=				positions[0].StoreDecaffeine == 1 ? '<span class="decaf" title="디카페인">디카페인</span>' : '';
				formStr +=				positions[0].StoreSoymilk == 1 ? '<span class="soy" title="두유">두유</span>' : '';
				formStr +=				positions[0].StoreParking == 1 ? '<span class="parking" title="주차가능">주차가능</span>' : '';
				formStr +=				positions[0].StoreWifi == 1 ? '<span class="wifi" title="와이파이">와이파이</span>' : '';
				formStr +=				positions[0].Storesmoking == 1 ? '<span class="smoking" title="흡연가능">흡연가능</span>' : '';
				formStr +=				positions[0].StoreMachine == 1 ? '<span class="machine" title="머신판매">머신판매</span>' : '';
				formStr +=				positions[0].StoreCapsule == 1 ? '<span class="capsule" title="캡슐판매">캡슐판매</span>' : '';
				//formStr +=				positions[0].StoreCake == 1 ? '<span class="cake" title="케익수령">케익수령</span>' : '';
				formStr +=				positions[0].StoreDrive == 1 ? '<span class="drive" title="드라이브 스루">드라이브 스루</span>' : '';

				formStr +='			</p>';
				//formStr +='			<p class="info">';
				//formStr +='				' + positions[0].StoreOpendate + '<br/>';
				//formStr +='				' + positions[0].StoreShortDesc + '<br/>';
				//formStr +='				' + positions[0].StoreAddress + '  <span class="lot">(' + positions[0].StoreAddress  + ')</span><br/>';
				//formStr +='				' + positions[0].StoreTel + ' / 매장 이메일 : ' + positions[0].StoreEmail + ' ';
				//formStr +='			</p>';
				formStr +='			<table class="store_table">';
				formStr +='				<tbody>';
				formStr +='					<tr>';
				formStr +='						<th>영업시간</th>';
				formStr +='						<td>' + positions[0].StoreOpendate + '</td>';
				formStr +='					</tr>';
				formStr +='					<tr>';
				formStr +='						<th>주차</th>';
				formStr +='						<td>' + positions[0].StoreShortDesc + '</td>';
				formStr +='					</tr>';
				formStr +='					<tr>';
				formStr +='						<th>주소</th>';
				formStr +='						<td>' + positions[0].StoreAddress + '  <!--span class="lot">(' + positions[0].StoreAddress  + ')</span--></td>';
				formStr +='					</tr>';
				formStr +='					<tr>';
				formStr +='						<th>전화번호</th>';
				formStr +='						<td>' + positions[0].StoreTel + '</td>';
				formStr +='					</tr>';
/*
				formStr +='					<tr>';
				formStr +='						<th>매장 이메일</th>';
				formStr +='						<td>' + positions[0].StoreEmail + '</td>';
				formStr +='					</tr>';
*/				
				formStr +='				<tbody>';
				formStr +='			</table>';
				formStr +='		</div>';
				formStr +='		<div class="share_box">';
				//formStr +='			<a href="javascript:jQuery(\'#hiddenSNS .twitter a\').click();void(0);"><img alt="" src="../../images/_temp/ico_twitter.png"></a>';
				//formStr +='			<a href="javascript:jQuery(\'#hiddenSNS .facebook a\').click();void(0);"><img alt="" src="../../images/_temp/ico_facebook.png"></a>';
				//formStr +='			<a href="javascript:jQuery(\'#hiddenSNS .kakaostory a\').click();void(0);"><img alt="" src="../../images/_temp/ico_kakaostory.png"></a>';
				formStr +='			<a href="javascript:share_pc(\'twitter\', \'' + no + '\');void(0);"><img alt="" src="../../images/_temp/ico_twitter.png"></a>';
				formStr +='			<a href="javascript:share_pc(\'facebook\', \'' + no + '\');void(0);"><img alt="" src="../../images/_temp/ico_facebook.png"></a>';
				formStr +='			<a href="javascript:share_pc(\'kakaostory\', \'' + no + '\');void(0);"><img alt="" src="../../images/_temp/ico_kakaostory.png"></a>';
				formStr +='		</div>';
				formStr +='		<button class="close" id="closeBtn1" style="cursor: pointer;"><img alt="닫기" src="/images/btn/btn_close4.png"></button>';
				formStr +='	</div>';
				formStr +='</div>';

				storePopup2 = new CoverLayer(formStr, {
					bg_color : "white", 		// 백그라운드 색상 기본값:"#000"
					bg_opacity : 0.75, 		// 백그라운드 투명도. 기본값:0.75
					close_btn_id : "closeBtn1", 	// 레이어 닫기 버튼 DOM id, 기본값:"closeBtn"
					z_index : 99999, 			// 레이어의 z-index 값 기본값:99990
					cast_speed : 500,		// 레이어 생성 트위닝 속도
					close_click : false,		// 어느곳이나 클릭시 닫힘 여부, 활성화:true, 비활성화:false(기본값)
					scroll_fix : false
				});

				jQuery('.store_pop_slide > div').slick({
					infinite: true,
					dots: true,
					arrows: false,
					fade: true,
					autoplay: true,
					autoplaySpeed: 4000,
					pauseOnHover : false,
					slidesToShow: 1,
					slidesToScroll: 1
				});
				jQuery('#btnControls2').on('click', function(){
					var controlsBtn = jQuery(this);
					if (controlsBtn.hasClass('paused')){
						jQuery('.store_pop_slide > div').slick('slickPlay');
						controlsBtn.removeClass('paused');
						controlsBtn.addClass('play');
					} else {
						jQuery('.store_pop_slide > div').slick('slickPause');
						controlsBtn.removeClass('play');
						controlsBtn.addClass('paused');
					}
				});

			}
		})

	}

	function share_pc(obj, no){
		jQuery("#hiddenSNS .ssSocial-Sharing").attr("data-requestUrl", urlScript + no);
		jQuery("#hiddenSNS ." + obj + " a").click();



	}



	function PrintComma(srcNumber) {
		var txtNumber = '' + srcNumber;
		var rxSplit = new RegExp('([0-9])([0-9][0-9][0-9][,.])');
		var arrNumber = txtNumber.split('.');
		arrNumber[0] += '.';
		do {
			arrNumber[0] = arrNumber[0].replace(rxSplit, '$1,$2');
		} while (rxSplit.test(arrNumber[0]));

		if (arrNumber.length > 1) 	{
			return arrNumber.join('');
		} else {
			return arrNumber[0].split('.')[0];
		}
	}